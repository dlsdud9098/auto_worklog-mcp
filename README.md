# auto_worklog-mcp

Claude와의 대화를 자동으로 작업일지로 저장하는 MCP (Model Context Protocol) 서버

## 🎯 주요 특징

- **파일 시스템 전용**: 일지 파일 생성 및 관리에만 집중
- **프로젝트별 MCP 인스턴스**: 각 프로젝트마다 별도 MCP 서버 설정
- **통합 폴더 구조**: 모든 프로젝트를 날짜별 하나의 폴더에 저장
- **파일명으로 프로젝트 구분**: `[프로젝트명]`을 파일명에 포함
- **Git 분리**: Git 작업은 별도 GitHub MCP를 통해 처리

## 📋 기능

- 📝 대화 내용을 체계적인 폴더 구조로 저장
- 📊 일일 작업 요약 자동 생성
- 🏷️ 프로젝트명을 파일명에 포함하여 구분
- 📂 날짜별 자동 분류

## 🚀 설치

### 1. 저장소 클론 및 의존성 설치

```bash
git clone https://github.com/dlsdud9098/auto_worklog-mcp.git
cd auto_worklog-mcp
npm install
npm run build
```

### 2. Claude Desktop 설정

Claude Desktop의 설정 파일에 프로젝트별 MCP 서버 추가:

**macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`  
**Windows**: `%APPDATA%\Claude\claude_desktop_config.json`  
**Linux**: `~/.config/Claude/claude_desktop_config.json`

#### 여러 프로젝트 설정 예시

```json
{
  "mcpServers": {
    "worklog_glitter": {
      "command": "node",
      "args": ["/home/apic/python/auto_worklog-mcp/dist/index.js"],
      "env": {
        "WORKLOG_PATH": "/home/apic/python/worklog",
        "WORK_BRANCH": "Inyoung",
        "PROJECT_NAME": "글리터 홈페이지"
      }
    },
    "worklog_pub": {
      "command": "node",
      "args": ["/home/apic/python/auto_worklog-mcp/dist/index.js"],
      "env": {
        "WORKLOG_PATH": "/home/apic/python/worklog",
        "WORK_BRANCH": "Inyoung",
        "PROJECT_NAME": "publishing.gltr-ous.us"
      }
    },
    "worklog_text2cuts": {
      "command": "node",
      "args": ["/home/apic/python/auto_worklog-mcp/dist/index.js"],
      "env": {
        "WORKLOG_PATH": "/home/apic/python/worklog",
        "WORK_BRANCH": "Inyoung",
        "PROJECT_NAME": "text2cuts"
      }
    }
  }
}
```

### 💡 설정 팁

- **MCP 서버 키**: 짧고 기억하기 쉬운 이름 사용 (예: `worklog_glitter` → `worklog_gl`)
- **PROJECT_NAME**: 파일명에 표시될 프로젝트 이름
- **모든 프로젝트가 동일한 WORKLOG_PATH와 WORK_BRANCH 사용**

## ⚙️ 환경 변수 설정

### 필수 환경 변수
- `WORKLOG_PATH`: 작업일지 저장 경로 (기본값: `/home/apic/python/worklog`)
- `WORK_BRANCH`: 작업 브랜치명 (기본값: `Inyoung`)
- `PROJECT_NAME`: 프로젝트 이름 (필수, 파일명에 표시됨)

## 📁 폴더 구조

```
${WORKLOG_PATH}/
├── 개발일지/
│   └── ${WORK_BRANCH}/
│       └── YYYY-MM-DD/
│           ├── 001-[글리터 홈페이지]메인 페이지 수정.md
│           ├── 002-[publishing.gltr-ous.us]배포 스크립트 개선.md
│           ├── 003-[text2cuts]이미지 변환 모듈 추가.md
│           └── 004-[글리터 홈페이지]버그 수정.md
└── 요약/
    └── ${WORK_BRANCH}/
        └── YYYY-MM-DD-요약.md
```

**중요**: 모든 프로젝트의 작업일지가 날짜별로 한 폴더에 저장되며, 파일명의 `[프로젝트명]` 부분으로 구분됩니다.

## 📝 파일명 규칙

- **개발일지**: `[3자리번호]-[프로젝트명]작업내용요약.md`
  - 번호: 001부터 당일 기준 순차 증가 (모든 프로젝트 통합 카운트)
  - 프로젝트명: PROJECT_NAME 환경변수 값
  - 요약: 50자 이내, 특수문자 제거
- **요약파일**: `YYYY-MM-DD-요약.md` (모든 프로젝트 통합)

## 📄 파일 내용 템플릿

### 개발일지
```markdown
# [작업 제목]

Date: YYYY-MM-DD
Branch: [브랜치명]
Project: [프로젝트명]
Log Number: [순번]

---

[대화 내용]

---

*Generated by auto_worklog-mcp at [타임스탬프]*
```

### 요약파일 (모든 프로젝트 통합)
```markdown
# [브랜치명] 일일 작업 요약

Date: YYYY-MM-DD
Branch: [브랜치명]

---

## 오늘의 작업

### 글리터 홈페이지
- 메인 페이지 수정
- 버그 수정

### publishing.gltr-ous.us
- 배포 스크립트 개선

### text2cuts
- 이미지 변환 모듈 추가

---

*Auto-generated summary*
```

## 🔧 사용법

Claude Desktop을 재시작한 후 각 프로젝트별로 설정된 MCP 도구를 사용합니다.

### CLI에서 사용

각 프로젝트는 별도의 MCP 서버로 구성되어 있으므로, 프로젝트별로 다른 명령어를 사용합니다:

```bash
# 글리터 홈페이지 프로젝트 작업일지 저장
/use worklog_glitter saveConversation
content: "오늘 작업한 내용..."
summary: "메인 페이지 레이아웃 수정"

# publishing 프로젝트 작업일지 저장
/use worklog_pub saveConversation
content: "배포 설정 변경..."
summary: "CI/CD 파이프라인 구성"

# text2cuts 프로젝트 작업일지 저장
/use worklog_text2cuts saveConversation
content: "새 기능 추가..."
summary: "이미지 처리 모듈 구현"
```

### 도구 목록

각 프로젝트 MCP 서버는 동일한 도구를 제공합니다:

#### 1. 대화 저장

```
/use worklog_[프로젝트키] saveConversation
content: "대화 내용"
summary: "간단한 요약"
```

저장 결과: `/개발일지/Inyoung/2025-01-15/001-[프로젝트명]간단한 요약.md`

#### 2. 일일 요약 생성

```
/use worklog_[프로젝트키] createDailySummary
date: "2025-01-15"  # 선택사항, 기본값은 어제
```

모든 프로젝트의 작업일지를 통합하여 일일 요약 생성

#### 3. 로그 목록 조회

```
/use worklog_[프로젝트키] listLogs
branch: "Inyoung"  # 선택사항
date: "2025-01-15"  # 선택사항
```

해당 프로젝트의 작업일지 목록 조회

#### 4. 최근 요약 조회

```
/use worklog_[프로젝트키] getLastSummary
```

가장 최근 일일 요약 조회

## 🔄 Git 작업 연동

이 MCP는 파일 관리만 담당합니다. Git 작업은 별도의 GitHub MCP를 사용하여 수행하세요:

1. **작업일지 저장** (auto_worklog-mcp)
   - 각 프로젝트별로 작업일지 저장
   - 파일명에 프로젝트명 자동 포함

2. **Git 작업** (github-mcp)
   - `git pull` - 최신 상태 동기화
   - `git add .` - 변경사항 스테이징
   - `git commit -m "docs: 작업일지 추가"`
   - `git push` - 원격 저장소에 푸시
   - PR 생성 (필요시)

## 💡 워크플로우 예시

### 일일 작업 흐름

1. **오전 작업 시작**
   ```bash
   # GitHub MCP로 최신 상태 동기화
   /use github pull
   ```

2. **프로젝트별 작업 및 기록**
   ```bash
   # 글리터 홈페이지 작업
   /use worklog_glitter saveConversation
   content: "메인 페이지 반응형 디자인 구현..."
   summary: "반응형 레이아웃 적용"
   
   # publishing 작업
   /use worklog_pub saveConversation
   content: "배포 자동화 스크립트 작성..."
   summary: "CI/CD 파이프라인 설정"
   ```

3. **작업 종료 시**
   ```bash
   # GitHub MCP로 커밋 및 푸시
   /use github add .
   /use github commit -m "docs: 오늘 작업일지 추가"
   /use github push
   ```

### 파일 저장 결과
```
개발일지/Inyoung/2025-01-15/
├── 001-[글리터 홈페이지]반응형 레이아웃 적용.md
├── 002-[publishing.gltr-ous.us]CI CD 파이프라인 설정.md
├── 003-[글리터 홈페이지]버그 수정.md
└── 004-[text2cuts]이미지 최적화 기능.md
```

## 🚨 문제 해결

### 프로젝트 설정 오류
- 각 프로젝트마다 별도의 MCP 서버 키 필요
- PROJECT_NAME 환경변수 필수
- 모든 프로젝트가 동일한 WORKLOG_PATH 사용

### 파일 번호 관리
- 번호는 날짜별로 초기화 (매일 001부터 시작)
- 모든 프로젝트가 순차적으로 번호 사용
- 동시 작업 시 자동으로 다음 번호 할당

### 경로 오류
- `WORKLOG_PATH`가 올바른 경로인지 확인
- 해당 디렉토리에 쓰기 권한이 있는지 확인

## 📌 버전 정보

- **v3.1.0**: 프로젝트별 폴더 분리 제거, 파일명으로 구분
- **v3.0.0**: 프로젝트별 MCP 인스턴스 방식
- **v2.0.0**: Git 기능 분리, 파일 관리 전용
- **v1.0.0**: 초기 버전 (Git 통합)

## 📜 라이선스

MIT