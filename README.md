# auto_worklog-mcp

Claude와의 대화를 자동으로 작업일지로 저장하는 MCP (Model Context Protocol) 서버

## 🎯 주요 특징

- **파일 시스템 전용**: 일지 파일 생성 및 관리에만 집중
- **Git 분리**: Git 작업은 별도 GitHub MCP를 통해 처리
- **체계적 구조**: 브랜치별, 날짜별 자동 정리
- **프로젝트별 인스턴스**: 각 프로젝트마다 별도 MCP 서버 설정

## 📋 기능

- 📝 대화 내용을 체계적인 폴더 구조로 저장
- 📊 일일 작업 요약 자동 생성
- 🌿 브랜치별 작업 분리 관리
- 📂 날짜별 자동 분류

## 🚀 설치

### 1. 저장소 클론 및 의존성 설치

```bash
git clone <repository-url>
cd auto_worklog-mcp
npm install
npm run build
```

### 2. Claude Desktop 설정

Claude Desktop의 설정 파일에 프로젝트별 MCP 서버 추가:

**macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`  
**Windows**: `%APPDATA%\Claude\claude_desktop_config.json`  
**Linux**: `~/.config/Claude/claude_desktop_config.json`

#### 단일 프로젝트 설정

```json
{
  "mcpServers": {
    "worklog_프로젝트1": {
      "command": "node",
      "args": ["/home/apic/python/auto_worklog-mcp/dist/index.js"],
      "env": {
        "WORKLOG_PATH": "/home/apic/python/worklog",
        "WORK_BRANCH": "Inyoung",
        "PROJECT_NAME": "프로젝트1"
      }
    }
  }
}
```

#### 여러 프로젝트 설정

```json
{
  "mcpServers": {
    "worklog_글리터홈페이지": {
      "command": "node",
      "args": ["/home/apic/python/auto_worklog-mcp/dist/index.js"],
      "env": {
        "WORKLOG_PATH": "/home/apic/python/worklog",
        "WORK_BRANCH": "Inyoung",
        "PROJECT_NAME": "글리터 홈페이지"
      }
    },
    "worklog_publishing": {
      "command": "node",
      "args": ["/home/apic/python/auto_worklog-mcp/dist/index.js"],
      "env": {
        "WORKLOG_PATH": "/home/apic/python/worklog",
        "WORK_BRANCH": "Inyoung",
        "PROJECT_NAME": "publishing.gltr-ous.us"
      }
    },
    "worklog_text2cuts": {
      "command": "node",
      "args": ["/home/apic/python/auto_worklog-mcp/dist/index.js"],
      "env": {
        "WORKLOG_PATH": "/home/apic/python/worklog",
        "WORK_BRANCH": "Inyoung",
        "PROJECT_NAME": "text2cuts"
      }
    }
  }
}
```

## ⚙️ 환경 변수 설정

### 필수 환경 변수
- `WORKLOG_PATH`: 작업일지 저장 경로 (기본값: `/home/apic/python/worklog`)
- `WORK_BRANCH`: 작업 브랜치명 (기본값: `Inyoung`)
- `PROJECT_NAME`: 프로젝트 이름 (필수, 기본값 없음)

## 📁 폴더 구조

```
${WORKLOG_PATH}/
├── 개발일지/
│   └── ${WORK_BRANCH}/
│       └── YYYY-MM-DD/
│           ├── 001-[글리터 홈페이지]메인 페이지 수정.md
│           ├── 002-[publishing.gltr-ous.us]배포 스크립트 개선.md
│           ├── 003-[text2cuts]이미지 변환 모듈 추가.md
│           └── 004-[글리터 홈페이지]버그 수정.md
└── 요약/
    └── ${WORK_BRANCH}/
        └── YYYY-MM-DD-요약.md
```

모든 프로젝트의 작업일지가 날짜별로 한 폴더에 저장되며, 파일명에 프로젝트명이 포함되어 구분됩니다.

## 📝 파일명 규칙

- **개발일지**: `[3자리번호]-[프로젝트명]작업내용요약.md`
  - 번호: 001부터 당일 기준 순차 증가
  - 프로젝트명: PROJECT_NAME 환경변수 값
  - 요약: 50자 이내, 특수문자 제거
- **요약파일**: `YYYY-MM-DD-요약.md`

## 📄 파일 내용 템플릿

### 개발일지
```markdown
# [작업 제목]

Date: YYYY-MM-DD
Branch: [브랜치명]
Project: [프로젝트명]
Log Number: [순번]

---

[대화 내용]

---

*Generated by auto_worklog-mcp at [타임스탬프]*
```

### 요약파일
```markdown
# [브랜치명] 일일 작업 요약

Date: YYYY-MM-DD
Branch: [브랜치명]

---

## 오늘의 작업
[당일 모든 개발일지 내용 요약]

---

*Auto-generated summary*
```

## 🔧 사용법

Claude Desktop을 재시작한 후 각 프로젝트별로 설정된 MCP 도구를 사용합니다.

### CLI에서 사용

각 프로젝트는 별도의 MCP 서버로 구성되어 있으므로, 프로젝트별로 다른 명령어를 사용합니다:

```bash
# 글리터 홈페이지 프로젝트 작업일지 저장
/use worklog_글리터홈페이지 saveConversation
content: "오늘 작업한 내용..."
summary: "기능 구현 완료"

# publishing 프로젝트 작업일지 저장
/use worklog_publishing saveConversation
content: "버그 수정 내용..."
summary: "로그인 에러 해결"

# text2cuts 프로젝트 작업일지 저장
/use worklog_text2cuts saveConversation
content: "새 기능 추가..."
summary: "이미지 처리 모듈 구현"
```

### 도구 목록

각 프로젝트 MCP 서버는 동일한 도구를 제공합니다:

#### 1. 대화 저장

```
/use worklog_[프로젝트키] saveConversation
content: "대화 내용"
summary: "간단한 요약"
```

#### 2. 일일 요약 생성

```
/use worklog_[프로젝트키] createDailySummary
date: "2025-01-15"  # 선택사항, 기본값은 어제
```

#### 3. 로그 목록 조회

```
/use worklog_[프로젝트키] listLogs
branch: "Inyoung"  # 선택사항
date: "2025-01-15"  # 선택사항
```

#### 4. 최근 요약 조회

```
/use worklog_[프로젝트키] getLastSummary
```

## 🔄 Git 작업 연동

이 MCP는 파일 관리만 담당합니다. Git 작업은 별도의 GitHub MCP를 사용하여 수행하세요:

1. **작업일지 저장** (auto_worklog-mcp)
2. **Git 작업** (github-mcp)
   - `git pull` - 최신 상태 동기화
   - `git add .` - 변경사항 스테이징
   - `git commit -m "docs: 작업일지 추가"`
   - `git push` - 원격 저장소에 푸시
   - PR 생성 (필요시)

## 💡 워크플로우 예시

1. Claude와 대화하며 작업 수행
2. 작업 완료 후 해당 프로젝트의 `saveConversation` 도구로 일지 저장
3. GitHub MCP를 사용하여 Git 작업 수행
4. 필요시 PR 생성 및 병합

## 🚨 문제 해결

### 프로젝트 설정 오류
- 각 프로젝트마다 별도의 MCP 서버 키 필요
- PROJECT_NAME 환경변수 필수

### 경로 오류
- `WORKLOG_PATH`가 올바른 경로인지 확인
- 해당 디렉토리에 쓰기 권한이 있는지 확인

## 📌 버전 정보

- **v3.0.0**: 프로젝트별 MCP 인스턴스 방식 (project 파라미터 제거)
- **v2.0.0**: Git 기능 분리, 파일 관리 전용
- **v1.0.0**: 초기 버전 (Git 통합)

## 📜 라이선스

MIT