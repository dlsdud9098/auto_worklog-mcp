# auto_worklog-mcp

Claude와의 대화를 자동으로 작업일지로 저장하는 MCP (Model Context Protocol) 서버

## 🎯 주요 특징

- **파일 시스템 전용**: 일지 파일 생성 및 관리에만 집중
- **Git 분리**: Git 작업은 별도 GitHub MCP를 통해 처리
- **체계적 구조**: 브랜치별, 날짜별 자동 정리
- **프로젝트별 관리**: 특정 프로젝트에서만 작업일지 저장 가능

## 📋 기능

- 📝 대화 내용을 체계적인 폴더 구조로 저장
- 📊 일일 작업 요약 자동 생성
- 🌿 브랜치별 작업 분리 관리
- 📂 날짜별 자동 분류

## 🚀 설치

### 1. 저장소 클론 및 의존성 설치

```bash
git clone <repository-url>
cd auto_worklog-mcp
npm install
npm run build
```

### 2. Claude Desktop 설정

Claude Desktop의 설정 파일에 MCP 서버 추가:

**macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`  
**Windows**: `%APPDATA%\Claude\claude_desktop_config.json`  
**Linux**: `~/.config/Claude/claude_desktop_config.json`

```json
{
  "mcpServers": {
    "auto_worklog": {
      "command": "node",
      "args": ["/home/apic/python/auto_worklog-mcp/dist/index.js"],
      "env": {
        "WORKLOG_PATH": "/home/apic/python/worklog",
        "WORK_BRANCH": "Inyoung",
        "USE_DAILY_NOTE": "프로젝트1,프로젝트2"
      }
    }
  }
}
```

## ⚙️ 환경 변수 설정

### 필수 환경 변수
- `WORKLOG_PATH`: 작업일지 저장 경로 (기본값: `/home/apic/python/worklog`)
- `WORK_BRANCH`: 작업 브랜치명 (기본값: `Inyoung`)

### 선택 환경 변수
- `USE_DAILY_NOTE`: 작업일지를 활성화할 프로젝트 목록 (쉼표 구분)
  - 예: `"글리터 홈페이지,publishing.gltr-ous.us,text2cuts"`
  - 이 목록에 있는 프로젝트에서만 작업일지가 저장됨
  - 비어있으면 모든 프로젝트에서 활성화
  - 설정되어 있으면 반드시 project 파라미터 지정 필요

## 📁 폴더 구조

```
${WORKLOG_PATH}/
├── 개발일지/
│   ├── ${WORK_BRANCH}/
│   │   └── YYYY-MM-DD/
│   │       ├── 001-작업요약.md
│   │       ├── 002-버그수정.md
│   │       └── 003-기능추가.md
│   └── [다른브랜치]/
│       └── YYYY-MM-DD/
│           └── 001-신규기능.md
└── 요약/
    ├── ${WORK_BRANCH}/
    │   └── YYYY-MM-DD-요약.md
    └── [다른브랜치]/
        └── YYYY-MM-DD-요약.md
```

## 📝 파일명 규칙

- **개발일지**: `[3자리번호]-[작업내용요약].md`
  - 번호: 001부터 당일 기준 순차 증가
  - 요약: 50자 이내, 특수문자 제거
- **요약파일**: `YYYY-MM-DD-요약.md`

## 📄 파일 내용 템플릿

### 개발일지
```markdown
# [작업 제목]

Date: YYYY-MM-DD
Branch: [브랜치명]
Log Number: [순번]

---

[대화 내용]

---

*Generated by auto_worklog-mcp at [타임스탬프]*
```

### 요약파일
```markdown
# [브랜치명] 일일 작업 요약

Date: YYYY-MM-DD
Branch: [브랜치명]

---

## 오늘의 작업
[당일 모든 개발일지 내용 요약]

---

*Auto-generated summary*
```

## 🔧 사용법

Claude Desktop을 재시작한 후 다음 도구들을 사용할 수 있습니다:

### 1. 대화 저장

```
/use saveConversation
content: "대화 내용"
summary: "간단한 요약"
project: "프로젝트명"  # 선택사항
```

**프로젝트 지정 방법:**
- `project` 파라미터로 프로젝트명 지정
- `USE_DAILY_NOTE`가 설정된 경우 반드시 project 지정 필요
- `USE_DAILY_NOTE` 목록에 없는 프로젝트는 저장되지 않음
- `USE_DAILY_NOTE`가 비어있으면 모든 프로젝트 허용 (project 생략 시 'default' 사용)

### 2. 일일 요약 생성

```
/use createDailySummary
date: "2025-01-15"  # 선택사항, 기본값은 어제
project: "프로젝트명"  # 선택사항
```

### 3. 로그 목록 조회

```
/use listLogs
branch: "Inyoung"  # 선택사항
date: "2025-01-15"  # 선택사항
```

### 4. 최근 요약 조회

```
/use getLastSummary
project: "프로젝트명"  # 선택사항
```

## 🔄 Git 작업 연동

이 MCP는 파일 관리만 담당합니다. Git 작업은 별도의 GitHub MCP를 사용하여 수행하세요:

1. **작업일지 저장** (auto_worklog-mcp)
2. **Git 작업** (github-mcp)
   - `git pull` - 최신 상태 동기화
   - `git add .` - 변경사항 스테이징
   - `git commit -m "docs: 작업일지 추가"`
   - `git push` - 원격 저장소에 푸시
   - PR 생성 (필요시)

## 💡 워크플로우 예시

1. Claude와 대화하며 작업 수행
2. 작업 완료 후 `saveConversation` 도구로 일지 저장
3. GitHub MCP를 사용하여 Git 작업 수행
4. 필요시 PR 생성 및 병합

## 🚨 문제 해결

### 프로젝트 오류
- "프로젝트 '...'는 worklog 저장이 비활성화" 메시지:
  - `USE_DAILY_NOTE`에 해당 프로젝트 추가
  - 또는 `USE_DAILY_NOTE`를 비워서 모든 프로젝트 허용

### 경로 오류
- `WORKLOG_PATH`가 올바른 경로인지 확인
- 해당 디렉토리에 쓰기 권한이 있는지 확인

## 📌 버전 정보

- **v2.0.0**: Git 기능 분리, 파일 관리 전용
- **v1.0.0**: 초기 버전 (Git 통합)

## 📜 라이선스

MIT